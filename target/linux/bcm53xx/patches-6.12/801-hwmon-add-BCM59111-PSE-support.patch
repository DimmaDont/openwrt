From: Matthew Hagan <mnhagan88@gmail.com>
Date: Wed, 17 Mar 2021 10:53:02 +0000
Subject: hwmon: add BCM59111 PSE support

This patch modifies the bcm_poe driver included in the Meraki MX64/MX65 
GPL archive[1] to allow device tree support and maintain power output 
across reboots.

[1] https://dl.meraki.net/wired-14-39-mx64-20190426.tar.bz2

Signed-off-by: Matthew Hagan <mnhagan88@gmail.com>
---

--- a/drivers/hwmon/Makefile
+++ b/drivers/hwmon/Makefile
@@ -58,6 +58,7 @@ obj-$(CONFIG_SENSORS_ASPEED_G6) += aspee
 obj-$(CONFIG_SENSORS_ASUS_ROG_RYUJIN)	+= asus_rog_ryujin.o
 obj-$(CONFIG_SENSORS_ATXP1)	+= atxp1.o
 obj-$(CONFIG_SENSORS_AXI_FAN_CONTROL) += axi-fan-control.o
+obj-$(CONFIG_SENSORS_BCM59111)	+= bcm59111.o
 obj-$(CONFIG_SENSORS_BT1_PVT)	+= bt1-pvt.o
 obj-$(CONFIG_SENSORS_CHIPCAP2) += chipcap2.o
 obj-$(CONFIG_SENSORS_CORETEMP)	+= coretemp.o
--- a/drivers/hwmon/Kconfig
+++ b/drivers/hwmon/Kconfig
@@ -437,6 +437,16 @@ config SENSORS_ATXP1
 	  This driver can also be built as a module. If so, the module
 	  will be called atxp1.
 
+config SENSORS_BCM59111
+	tristate "Broadcom BCM59111"
+	depends on I2C
+	help
+	  If you say yes here you get support for the Broadcom BCM59111 PSE
+	  controller.
+
+	  This driver can also be built as a module. If so, the module
+	  will be called bcm59111.
+
 config SENSORS_BT1_PVT
 	tristate "Baikal-T1 Process, Voltage, Temperature sensor driver"
 	depends on MIPS_BAIKAL_T1 || COMPILE_TEST
